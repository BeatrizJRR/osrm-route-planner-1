<?xml version="1.0" encoding="UTF-8"?>
<pmd-cpd>
   <duplication lines="23" tokens="178">
      <file begintoken="1972" column="48" endcolumn="17" endline="113" endtoken="2149"
            line="91"
            path="C:\Users\Frederico\Desktop\Mestrado\1 Ano\1ยบ Semestre\Arquiteura e Desenho de Software\osrm-route-planner\src\main\java\com\myapp\service\Service.java"/>
      <file begintoken="3662" column="36" endcolumn="17" endline="399" endtoken="3839"
            line="375"
            path="C:\Users\Frederico\Desktop\Mestrado\1 Ano\1ยบ Semestre\Arquiteura e Desenho de Software\osrm-route-planner\src\main\java\com\myapp\service\Service.java"/>
      <codefragment><![CDATA[            JsonArray routes = osrmResponseJSON.getAsJsonArray("routes");
            if (routes.size() == 0) {
                System.err.println("[RouteService] Nenhuma rota encontrada");
                return null;
            }

            JsonObject firstRoute = routes.get(0).getAsJsonObject();
            double distanceKm = firstRoute.get("distance").getAsDouble() / 1000.0;
            long durationSec = Math.round(firstRoute.get("duration").getAsDouble());

            List<Point> path = new ArrayList<>();
            JsonArray coordsArray = firstRoute
                    .getAsJsonObject("geometry")
                    .getAsJsonArray("coordinates");

            for (JsonElement el : coordsArray) {
                JsonArray coord = el.getAsJsonArray();
                double lon = coord.get(0).getAsDouble();
                double lat = coord.get(1).getAsDouble();
                path.add(new Point(lat, lon, null));
            }
            return new Route(path, distanceKm, durationSec, mode, new ArrayList<>());
        } catch (IOException | InterruptedException e) {]]></codefragment>
   </duplication>
</pmd-cpd>