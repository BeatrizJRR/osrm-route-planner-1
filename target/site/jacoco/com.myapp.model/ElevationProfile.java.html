<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ElevationProfile.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">osrm-route-planner</a> &gt; <a href="index.source.html" class="el_package">com.myapp.model</a> &gt; <span class="el_source">ElevationProfile.java</span></div><h1>ElevationProfile.java</h1><pre class="source lang-java linenums">package com.myapp.model;

import java.util.List;

/**
 * Representa o perfil de elevação ao longo de uma rota, incluindo amostras de
 * altitude, distâncias acumuladas e estatísticas como máximos, mínimos, subida
 * total e descida total.
 *
 * Papel na arquitetura MVC:
 * - Model: agrega dados de elevação processados pelo Service (Controller).
 * - Service obtém dados da ElevationClient API e constrói este modelo.
 * - UI (View) renderiza gráficos e estatísticas; este modelo encapsula
 * cálculos.
 * 
 * As unidades são: elevação em metros (m) e distância acumulada em quilómetros
 * (km).
 */
public class ElevationProfile {
    // Lista de elevações em metros (m) para cada amostra do percurso.
    private final List&lt;Double&gt; elevations;
    // Lista de distâncias acumuladas em quilómetros (km) para cada amostra.
    private final List&lt;Double&gt; distances;
    // Maior valor de elevação observado.
    private final double maxElevation;
    // Menor valor de elevação observado.
    private final double minElevation;
    // Subida total ao longo do percurso, em metros (m).
    private final double totalAscent;
    // Descida total ao longo do percurso, em metros (m).
    private final double totalDescent;

    /**
     * Cria um novo {@link ElevationProfile} e calcula estatísticas com base nas
     * listas fornecidas.
     *
     * @param elevations lista de elevações em metros
     * @param distances  lista de distâncias acumuladas em quilómetros (mesmo
     *                   tamanho que {@code elevations})
     */
<span class="fc" id="L41">    public ElevationProfile(List&lt;Double&gt; elevations, List&lt;Double&gt; distances) {</span>
<span class="fc" id="L42">        this.elevations = elevations;</span>
<span class="fc" id="L43">        this.distances = distances;</span>

        // Calcular estatísticas
<span class="fc" id="L46">        double max = Double.MIN_VALUE;</span>
<span class="fc" id="L47">        double min = Double.MAX_VALUE;</span>
<span class="fc" id="L48">        double ascent = 0;</span>
<span class="fc" id="L49">        double descent = 0;</span>

<span class="fc bfc" id="L51" title="All 2 branches covered.">        for (int i = 0; i &lt; elevations.size(); i++) {</span>
<span class="fc" id="L52">            double elev = elevations.get(i);</span>
<span class="fc" id="L53">            max = Math.max(max, elev);</span>
<span class="fc" id="L54">            min = Math.min(min, elev);</span>

<span class="fc bfc" id="L56" title="All 2 branches covered.">            if (i &gt; 0) {</span>
<span class="fc" id="L57">                double diff = elev - elevations.get(i - 1);</span>
<span class="fc bfc" id="L58" title="All 2 branches covered.">                if (diff &gt; 0)</span>
<span class="fc" id="L59">                    ascent += diff;</span>
                else
<span class="fc" id="L61">                    descent += Math.abs(diff);</span>
            }
        }

<span class="fc" id="L65">        this.maxElevation = max;</span>
<span class="fc" id="L66">        this.minElevation = min;</span>
<span class="fc" id="L67">        this.totalAscent = ascent;</span>
<span class="fc" id="L68">        this.totalDescent = descent;</span>
<span class="fc" id="L69">    }</span>

    /**
     * Devolve a lista de elevações (m).
     *
     * @return lista de elevações em metros
     */
    public List&lt;Double&gt; getElevations() {
<span class="fc" id="L77">        return elevations;</span>
    }

    /**
     * Devolve a lista de distâncias acumuladas (km).
     *
     * @return lista de distâncias em quilómetros
     */
    public List&lt;Double&gt; getDistances() {
<span class="fc" id="L86">        return distances;</span>
    }

    /**
     * Devolve a elevação máxima observada.
     *
     * @return elevação máxima em metros
     */
    public double getMaxElevation() {
<span class="fc" id="L95">        return maxElevation;</span>
    }

    /**
     * Devolve a elevação mínima observada.
     *
     * @return elevação mínima em metros
     */
    public double getMinElevation() {
<span class="fc" id="L104">        return minElevation;</span>
    }

    /**
     * Devolve a subida total ao longo do percurso.
     *
     * @return subida total em metros
     */
    public double getTotalAscent() {
<span class="fc" id="L113">        return totalAscent;</span>
    }

    /**
     * Devolve a descida total ao longo do percurso.
     *
     * @return descida total em metros
     */
    public double getTotalDescent() {
<span class="fc" id="L122">        return totalDescent;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>